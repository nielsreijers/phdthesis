% UPDATED 20180301

\begin{table}
\caption{Effect of manual source optimisation on the CoreMark benchmark}
\label{tbl-coremark-manual-optimisation}
    \centerline{
    \begin{threeparttable}
    \begin{tabular}{lrrrrrrrr}
    \toprule
                                                                          & \multicolumn{2}{l}{list}   & \multicolumn{2}{l}{matrix} & \multicolumn{2}{l}{state}  & \multicolumn{2}{l}{total}     \\
                                                                          & \scriptsize time \tnote{a} & \scriptsize vs nat. C      & \scriptsize time \tnote{a} & \scriptsize vs nat. C            & \scriptsize time \tnote{a} & \scriptsize vs nat. C  & \scriptsize time \tnote{a} & \scriptsize vs nat. C \\
    \midrule
    \midrule
    native C                                                              &  17.9                      &                            &  49.2                      &                                  &  18.0                      &                        &  85.1                      & \\
    baseline                                                              & 124.3                      & (+594\%)                   & 361.3                      & (+634\%)                         & 288.8                      & (+1504\%)              & 775.0                      & (+811\%) \\
    optimised, using original source                                      &  55.9                      & (+212\%)                   & 232.0                      & (+372\%)                         &  75.7                      &  (+321\%)              & 363.8                      & (+327\%) \\
    % CHANGE COMPARED TO PREVIOUS, SIMILAR TO MAIN TABLES ON PERF/CODE SIZE
    \makebox[5mm]{} \scriptsize manually inline small methods             & \scriptsize   0.0          & \scriptsize    (0\%)       & \scriptsize   -37.1        & \scriptsize  (-75\%)             & \scriptsize   -16.7        & \scriptsize    (-93\%) & \scriptsize  -53.8         & \scriptsize  (-63\%) \\
    \makebox[5mm]{} \scriptsize use short array index variables           & \scriptsize   0.0          & \scriptsize    (0\%)       & \scriptsize  -104.7        & \scriptsize (-213\%)             & \scriptsize     0.0        & \scriptsize      (0\%) & \scriptsize -104.7         & \scriptsize (-123\%) \\
    \makebox[5mm]{} \scriptsize avoid recalculating expressions in a loop & \scriptsize   0.0          & \scriptsize    (0\%)       & \scriptsize    -7.5        & \scriptsize  (-15\%)             & \scriptsize     0.0        & \scriptsize      (0\%) & \scriptsize   -7.5         & \scriptsize   (-9\%) \\
    \makebox[5mm]{} \scriptsize reduce array and object access            & \scriptsize   0.0          & \scriptsize    (0\%)       & \scriptsize   -18.1        & \scriptsize  (-37\%)             & \scriptsize    -2.4        & \scriptsize    (-13\%) & \scriptsize  -20.5         & \scriptsize  (-24\%) \\
    \makebox[5mm]{} \scriptsize reduce branch cost in crcu8               & \scriptsize  -4.0          & \scriptsize  (-22\%)       & \scriptsize    -0.5        & \scriptsize   (-1\%)             & \scriptsize    -3.5        & \scriptsize    (-19\%) & \scriptsize   -8.0         & \scriptsize   (-9\%) \\


    using optimised source                                                & 51.9                       & (+190\%)                   & 64.1                       & (+30\%)                          & 53.1                       & (+195\%)               & 169.3                      & (+99\%) \\
    \midrule
    % CHANGE COMPARED TO PREVIOUS, SIMILAR TO MAIN TABLES ON PERF/CODE SIZE
    \makebox[5mm]{} \scriptsize (unfair) avoid creating objects           & \scriptsize   0.8          & \scriptsize   (+4\%)       & \scriptsize       0        & \scriptsize    (0\%)             & \scriptsize   -10.4        & \scriptsize    (-58\%) & \scriptsize   -9.6         & \scriptsize  (-11\%) \\
    \makebox[5mm]{} \scriptsize (unfair) avoid virtual calls              & \scriptsize -22.8          & \scriptsize (-127\%)       & \scriptsize       0        & \scriptsize    (0\%)             & \scriptsize       0        & \scriptsize      (0\%) & \scriptsize  -22.8         & \scriptsize  (-27\%) \\
    after 'unfair' optimisations                                          & 29.9                       & (+67\%)                    & 64.1                       & (+30\%)                          & 42.7                       & (+137\%)               & 136.9                      & (+61\%) \\
    \bottomrule
    \end{tabular}
    \begin{tablenotes}
        \item[a] in millions of cycles
    \end{tablenotes}
    \end{threeparttable}
    }
\end{table}
