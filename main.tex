\documentclass[phd]{ntuthesis}

\def\withwatermark{1}

\usepackage{times}
\usepackage{verbatim}
\usepackage{color}
\usepackage{url}
\usepackage{graphicx}
\usepackage{array}
\usepackage{wallpaper} 
\usepackage{hyperref}
\usepackage{booktabs}
\usepackage{color, colortbl}
\usepackage{threeparttable}
\usepackage{csquotes}
\usepackage{pdflscape}
\usepackage{enumitem}
\usepackage{caption}
\usepackage{chngcntr}
\usepackage[outputdir=.texpadtmp]{minted}
%\usepackage{pgfpages}
%\pgfpagesuselayout{2 on 1}[a4paper,border shrink=-8mm,landscape]
\setminted{frame=lines,linenos=true,baselinestretch=1,fontsize=\scriptsize}
\setmonofont{Courier}
\counterwithin{listing}{chapter}

%%%%%%%%%%%% MY COMMANDS
\newcommand{\sccomment}[1] { \emph{ << #1 >> } }
\newcommand{\sce}[3]{
\makebox[3.5mm][r]{\scriptsize #1}
\makebox[3.5mm]{\scriptsize #2}
\makebox[2.5mm][l]{\tiny #3}
}
\newcommand{\use}{\centering\scriptsize *}
\newcommand{\mygraphsize}[0] { 0.9\linewidth }
\newcommand{\xt}[0] { \scriptsize }
\newcommand{\xxt}[0] { \makebox[2mm]{} }
\newcommand{\xxxt}[0] { \makebox[5mm]{} \scriptsize }
\newcommand{\tblhl}[0] {\cellcolor{yellow!55}}
\newcommand{\mycode}[2][java]{\mintinline[fontsize=\normalsize]{#1}{#2}}
\newcommand{\mycodetbl}[2][java]{\mintinline[fontsize=\footnotesize]{#1}{#2}}
% \newcommand{\mycode}[2][java]{\texttt{\detokenize{#2}}}
\newcommand{\mybench}[1]{\emph{#1}}
\newcommand{\lcell}[1]{\multicolumn{1}{l}{#1}}

\emergencystretch 3em

\let\originaltable\table
\let\endoriginaltable\endtable
\renewenvironment{table}[1][t]{%
  \originaltable[#1]
  \centering
  \footnotesize}%
  {\endoriginaltable}

%%%%%%%%%%%% END MY COMMANDS

% Using the tex-text mapping for ligatures etc.
\defaultfontfeatures{Mapping=tex-text}

% Set the default fonts
\setmainfont{Times New Roman}
\setCJKmainfont{Kaiti TC}

\ifdefined\withwatermark
  \CenterWallPaper{0.174}{watermark.pdf}
  \setlength{\wpXoffset}{6.1725cm}
  \setlength{\wpYoffset}{10.5225cm}
\fi

% digital object identifier
\ifdefined\withdoi
  \insertdoi
\fi

\makeatletter
\AtBeginDocument{
  \hypersetup{
    pdftitle={\@titleen},
    pdfauthor={\@authoren},
    pdfsubject={\@typeen{} \@classen},
    pdfkeywords={\@keywordsen}
  }
}

\global\let\tikz@ensure@dollar@catcode=\relax
\makeatother

% Your information goes here
\input{ntuvars}

\begin{document}

\frontmatter

\makecover

\makecertification

\newpage
~
\newpage
\vspace*{6cm}
\centerline{\emph{Dedicated to Ton, Leny and Nanda Reijers.}}
\newpage

\input{000-acknowledgements}
\input{010-abstract}

\tableofcontents
\listoffigures
\listoftables
\listoflistings

\mainmatter

% Your thesis goes here
\input{100-introduction}
\input{200-background}
\input{300-state-of-the-art}
\input{400-vm-design}
\input{500-performance-optimisation}
\input{510-sources-of-overhead}
\input{520-optimisations-java-source}
\input{530-optimisations-aot-translation-overhead}
\input{540-optimisations-method-calls}
\input{600-guaranteeing-safety}
\input{700-evaluation}
\input{710-evaluation-benchmarks}
\input{720-evaluation-coremark}
\input{730-evaluation-performance}
\input{740-evaluation-code-size}
\input{750-evaluation-benchmark-details}
\input{755-evaluation-const-array}
\input{760-evaluation-method-calls}
\input{770-evaluation-the-cost-of-safety}
\input{780-evaluation-other-platforms}
\input{790-evaluation-limitations-and-the-cost-of-vm}
\input{800-lessons-from-jvm}
\input{900-conclusion}

% TODO: title chapter 8?
% TODO: include source code in appendix?
% TODO: include ESL as 'in press'?

\appendix
\input{A00-lec-source}
\input{B00-outlier-source}
\input{C00-heat-detection-source}

\backmatter

\addcontentsline{toc}{chapter}{\bibname}
\bibliographystyle{abbrv}

% Your bibliography goes here
\bibliography{references}

\end{document}
