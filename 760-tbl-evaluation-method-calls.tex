% UPDATED 20180213

\begin{table}
\caption{Methods per benchmark and relative performance for normal, lightweight invocation, and inlining. Highlights indicate changes from the versions used to obtain the results in the previous sections.}
\label{tbl-evaluation-method-calls}
    \begin{tabular}{lllllll}
    \toprule
                                 & \# calls                     & C                 & Java                          & Java                            & Java                            \\
                                 &                              &                   & Base version                  & Alternative version             & Using normal method calls       \\
    \midrule
    \midrule
    \\
    CoreMark \\
    ee\_isdigit                  & \multicolumn{1}{r}{3920}     & normal (inlined)  & manually inlined              & \tblhighlight lightweight (JVM) & manually inlined                \\
    core\_state\_transition      & \multicolumn{1}{r}{1024}     & normal            & lightweight                   & lightweight                     & \tblhighlight normal            \\
    crcu8                        & \multicolumn{1}{r}{584}      & normal (inlined)  & lightweight                   & lightweight                     & \tblhighlight normal            \\
    crcu16                       & \multicolumn{1}{r}{292}      & normal            & lightweight                   & lightweight                     & \tblhighlight normal            \\
    calc\_func                   & \multicolumn{1}{r}{220}      & normal            & lightweight                   & lightweight                     & \tblhighlight normal            \\
    compare\_idx                 & \multicolumn{1}{r}{209}      & normal (inlined)  & normal (virtual)              & normal (virtual)                & normal (virtual)                \\
    core\_list\_find             & \multicolumn{1}{r}{206}      & normal            & lightweight                   & lightweight                     & \tblhighlight normal            \\
    compare\_complex             & \multicolumn{1}{r}{110}      & normal            & normal (virtual)              & normal (virtual)                & normal (virtual)                \\
    crcu32                       & \multicolumn{1}{r}{64}       & normal            & lightweight                   & lightweight                     & \tblhighlight normal            \\
    matrix\_sum                  & \multicolumn{1}{r}{16}       & normal            & lightweight                   & lightweight                     & \tblhighlight normal            \\
    others (<16 calls each)      & \multicolumn{1}{r}{39}       & normal            & normal                        & normal                          & normal                          \\
    \\
    % The cycles from the simulation are for 50 iterations. Just divide by 50 here so the cycle count + the number of invokes produces the right overhead. An actual simulation run with 1 iteration is a bit slower, but only a few % so it's not significant enough to worry about here.
    %                                                                                 coremk                          coremk_lw                         coremk_fn
    \emph{cycles}                &                              &                   & \multicolumn{1}{r}{3,373,037} & \multicolumn{1}{r}{3,543,531}   & \multicolumn{1}{r}{4,844,211}   \\
    \emph{overhead v native C}   &                              &                   & \multicolumn{1}{r}{98.1\%}    & \multicolumn{1}{r}{108.1\%}     & \multicolumn{1}{r}{184.5\%}     \\
    \emph{code size}             &                              &                   & \multicolumn{1}{r}{9,182}     & \multicolumn{1}{r}{9,228}       & \multicolumn{1}{r}{9,512}       \\
    \\
    \midrule
    \\
    FFT \\
    FIX\_MPY                     & \multicolumn{1}{r}{768}      & marked inline     & manually inlined              & \tblhighlight lightweight(JVM)  & \tblhighlight normal            \\
    \\
    %                                                                                 fft                             fft_lw                            fft_fn
    \emph{cycles}                &                              &                   & \multicolumn{1}{r}{179,818}   & \multicolumn{1}{r}{215,146}     & \multicolumn{1}{r}{661,486}     \\
    \emph{overhead v native C}   &                              &                   & \multicolumn{1}{r}{17.7\%}    & \multicolumn{1}{r}{40.9\%}      & \multicolumn{1}{r}{333.1\%}     \\
    \emph{code size}             &                              &                   & \multicolumn{1}{r}{1,342}     & \multicolumn{1}{r}{1,338}       & \multicolumn{1}{r}{1,426}       \\
    \\
    \midrule
    \\
    heap sort \\
    SWAP                         & \multicolumn{1}{r}{1642}     & \#define          & manually inlined              & manually inlined                & manually inlined                \\
    siftDown                     & \multicolumn{1}{r}{383}      & normal            & lightweight                   & \tblhighlight manually inlined  & \tblhighlight normal            \\
    \\
    %                                                                                 hsort16                         hsort16_cht                       hsort16_fn
    \emph{cycles}                &                              &                   & \multicolumn{1}{r}{208,239}   & \multicolumn{1}{r}{184,071}     & \multicolumn{1}{r}{437,264}     \\
    \emph{overhead v native C}   &                              &                   & \multicolumn{1}{r}{88.5\%}    & \multicolumn{1}{r}{66.6\%}      & \multicolumn{1}{r}{295.8\%}     \\
    \emph{code size}             &                              &                   & \multicolumn{1}{r}{596}       & \multicolumn{1}{r}{662}         & \multicolumn{1}{r}{602}         \\
    % Data for hsort32:
    % \emph{cycles}                &                              &                   & \multicolumn{1}{r}{289,268}   & \multicolumn{1}{r}{286,200}     & \multicolumn{1}{r}{568,889}     \\ 
    % \emph{overhead v native C}   &                              &                   & \multicolumn{1}{r}{66.2\%}    & \multicolumn{1}{r}{64.4\%}      & \multicolumn{1}{r}{226.8\%}     \\ 
    % \emph{code size}             &                              &                   & \multicolumn{1}{r}{702}       & \multicolumn{1}{r}{890}         & \multicolumn{1}{r}{722}         \\ 
    \bottomrule
    \end{tabular}
\end{table}



